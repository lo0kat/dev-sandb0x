variant: fcos
version: 1.4.0
kernel_arguments:
  should_exist:
    - net.ifnames=0
storage:
  files:
    - path: /etc/docker/daemon.json
      mode: 0600
      contents:
        inline: |
          {
            "data-root": "/tmp/docker"
          } 
          
    - path: /etc/NetworkManager/system-connections/eth0.nmconnection
      mode: 0600
      contents:
        inline: |
         [connection]
         id=eth0
         type=ethernet
         interface-name=eth0

         [ipv4]
         address1=192.168.1.201/24
         gateway=192.168.1.1
         dns=8.8.8.8;
         dns-search=
         may-fail=false
         method=manual

         [ipv6]
         method=disabled

      
passwd:
  users:
    - name: core
      ssh_authorized_keys:
        - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQDfaFHX07UaMUt/lhXTfgiB3zGw8l5ivPimJDXuus4Tc1OMB3bHgGZg+I9BearN4/UzhddXo6S2B754UKHldzEg5uY9kUyOv5w5TOXFPKFm7cZrYaj0oEj2wwG7L3FctuFfltTEAPLjRtba/Et+rFIiZlI/8KHXOJ+S3zsPcglzXvLtg62ldHcLY21Xcy/9oIcg55X7pImllyRbIvoKaCEjr+Lxfy/2gsJs5tvFsJszPHFCVP89jKaJYIxRaPTZjnCU/b51G3G36slY26gXuv1qXVqHr2bn0IvwdOj5Yghy2SMkylPowHqpvmh7Pg2Ux4does/EcaBD4x/tpBuGOeoChHbHc8moOZb4TYILIWVYneXIdZtGCZOtzqQoR2A+sTvjWHEQEwsb/OvgnqbnxXqTdCe2OK8eyugxuj9o6Tr2a13H8+AMK8M6gmIBwYDpTfCFEYo1XM+E0Xc64sRyR7GvieSmXF275bwxCibXgovT3u3vSAsYNGXh2d0aZsZ2//D0V9Sb/uD4hvlctaW/JTz9BNjD8kewyx75CHdhyXEEWUFoCgRQJWp/jCKeA65U+ubpfD7+T4XgvSWD+ncnAzOhXnVQIgnsaezGh+767ThmnvBYDF5pEoZWjlO0hPpZLMSFJmgjDW2PRNT/eW2A5miB6bylLRnhyKSiIcbiuZ2Jkw==
      groups:
        - wheel
        - sudo
systemd:
  units:
    - name: qemu-guest-agent.service
      enabled: true
      contents: |
        [Unit]
        Description=Runs qemu guest agent inside docker
        [Service]
        Type=oneshot
        RemainAfterExit=yes
        ExecStart=docker run -d --privileged --network host -v /dev/virtio-ports/org.qemu.guest_agent.0:/dev/virtio-ports/org.qemu.guest_agent.0  eleh/qemu-guest-agent
        [Install]
        WantedBy=multi-user.target   